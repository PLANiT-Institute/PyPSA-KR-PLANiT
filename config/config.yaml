# Configuration for mapping component carriers to monthly data

# Carrier mapping matrix
# Maps network component carrier names to data file carrier names
carrier_mapping:
  # Fossil fuels
  bituminous: bituminous
  anthracite: anthracite
  oil: oil
  "heavy oil": oil
  diesel: oil
  LNG: LNG

  # Nuclear
  nuclear: nuclear

  # Renewables and storage
  bio: bio
  solar: solar
  wind: wind
  hydro: hydro
  ocean: ocean
  PSH: PSH

  # Others
  miscellaneous: miscellaneous
  fuelcell: fuelcell
  IGCC: IGCC
  waste: waste

# Monthly time-series data file path
monthly_data:
  file_path: "data/add/monthly_t.csv"

# Snapshot-level data file path
snapshot_data:
  file_path: "data/add/snapshot_t.csv"

# Regional settings
regional_settings:
  national_region: "KR"

# Base data file path
Base_year:
  year: 2024
  file_path: "data/Provincenode2024"

# Modelling years (list of years to analyze)
Years:
  - 2024

# CC generator merge rules
# Defines how to aggregate attributes when merging combined cycle generators
cc_merge_rules:
  # p_nom is always summed (hardcoded)
  build_year: oldest      # Use the oldest (minimum) build year
  capital_cost: largest   # Use the largest (maximum) capital cost
  p_nom: sum
  others: p_nom
  name: cc_group
  # Add more rules as needed:
  # attribute_name: rule
  #
  # Available rules:
  #   - oldest: Use minimum value (for years, dates)
  #   - newest: Use maximum value (for years, dates)
  #   - largest: Use maximum value (for costs, capacities)
  #   - smallest: Use minimum value
  #   - p_nom: Use value from generator with largest p_nom
  #   - sum: Sum all values
  #   - mean: Average of all values
  #   - remove: Remove this attribute from merged generator

# Generator region aggregator rules
# Defines how to aggregate attributes when aggregating generators by carrier AND region
generator_region_aggregator_rules:
  # Name format: carrier_region (e.g., LNG_경기)
  carrier: carrier        # Use the carrier value itself
  province: region        # Use the region value itself (special rule)
  bus: region             # Connect to regional bus (special rule)
  control: PQ             # Set control to PQ
  p_nom: sum              # Sum all p_nom values
  efficiency: mean        # Use mean efficiency
  marginal_cost: mean     # Use mean marginal cost
  capital_cost: mean      # Use mean capital cost
  x: mean                 # Average x coordinate (center of region)
  y: mean                 # Average y coordinate (center of region)

  # Default rule for unspecified attributes: ignore (don't copy)
  others: ignore

# Regional aggregation rules
# Defines how to aggregate network components by geographical regions
regional_aggregation:
  # Region column name to aggregate by (must exist in buses, generators, and demand file)
  region_column: province

  # Whether to aggregate generators by carrier and region (creates carrier_region generators)
  # If true, generators will be aggregated into one generator per (carrier, region) combination
  # If false, all generators within a region will keep their individual identities
  aggregate_generators_by_carrier: true

  # Path to regional demand file (must have columns: region_column and 'demand')
  demand_file: data/others/province_demand.xlsx

  # Path to province mapping file (for standardizing region names)
  province_mapping_file: data/others/province_mapping.csv

  # Carrier for regional loads (leave empty for no carrier)
  load_carrier: ""

  # Carrier for regional buses (leave empty to use carrier from original buses)
  bus_carrier: ""

  # Line aggregation settings
  lines:
    # How to group lines when aggregating by region
    # Options:
    #   - by_voltage: Group by (bus0_region, bus1_region, v_nom) - keeps different voltages separate
    #   - ignore_voltage: Group by (bus0_region, bus1_region) only - combines all voltages
    grouping: by_voltage

    # How to aggregate circuits
    # Options:
    #   - sum: Sum all circuits (represents total parallel capacity)
    #   - max: Use maximum circuits
    #   - mean: Use average circuits
    circuits: sum

    # How to aggregate s_nom (nominal power)
    # Options:
    #   - keep_original: Keep s_nom from one line (Option 3 - track via circuits)
    #   - sum: Sum all s_nom values
    #   - max: Use maximum s_nom
    #   - scale_by_circuits: s_nom * total_circuits (total capacity)
    s_nom: scale_by_circuits

    # How to aggregate r, x, b (resistance, reactance, susceptance)
    # Options:
    #   - weighted_by_circuits: Weighted average by number of circuits
    #   - mean: Simple average
    #   - min: Use minimum value
    #   - max: Use maximum value
    impedance: weighted_by_circuits

    # How to aggregate length
    # Options:
    #   - mean: Average length
    #   - max: Maximum length
    #   - min: Minimum length
    length: mean

    # Remove self-loop lines (lines connecting a region to itself)
    remove_self_loops: true

  # Link aggregation settings (if links exist in network)
  links:
    # Same options as lines
    grouping: ignore_voltage
    circuits: sum
    p_nom: sum
    default_efficiency: 1.0  # Default efficiency for aggregated links (1.0 = 100%)
    unlimited_capacity: 1000000  # If p_nom = 0 after aggregation, use this value (MW) for unlimited capacity
    length: mean
    remove_self_loops: true
